--UPGCVX-1671

--Add New Trigger Action for Class CARGO_HARBOUR_DUES
Insert into CLASS_TRIGGER_ACTN_CNFG(CLASS_NAME, TRIGGERING_EVENT, TRIGGER_TYPE, SORT_ORDER, APP_SPACE_CNTX, DB_SQL_SYNTAX)
Values('CARGO_HARBOUR_DUES', 'INSERTING OR UPDATING', 'BEFORE', 110, 'WST', 'IF UPDATING(''LAST_UPDATED_BY'') THEN NULL; ELSE IF ec_harbour_dues.text_6(n_DUE_CODE,n_DAYTIME) IS NOT NULL THEN RAISE_APPLICATION_ERROR(-20853,''Excess berth charges can only be entered into the DV_DEMURRAGE view''); END IF;END IF;');
                
--Add Trigger Action Property for Class CARGO_HARBOUR_DUES
Insert into CLASS_TRA_PROPERTY_CNFG(CLASS_NAME, TRIGGERING_EVENT, TRIGGER_TYPE, SORT_ORDER, PROPERTY_CODE,OWNER_CNTX, PROPERTY_TYPE, PROPERTY_VALUE)
Values ('CARGO_HARBOUR_DUES', 'INSERTING OR UPDATING', 'BEFORE', 110, 'DESCRIPTION', 2500, 'APPLICATION', 'Sets up permissions on harbour dues');

Insert into CLASS_TRA_PROPERTY_CNFG (CLASS_NAME, TRIGGERING_EVENT, TRIGGER_TYPE, SORT_ORDER, PROPERTY_CODE, OWNER_CNTX, PROPERTY_TYPE, PROPERTY_VALUE)
Values('CARGO_HARBOUR_DUES', 'INSERTING OR UPDATING', 'BEFORE', 110, 'DISABLED_IND', 2500, 'VIEWLAYER', 'N');
                
--Disable the project specific trigger action 
update class_tra_property_cnfg set property_value = 'Y' where property_code = 'DISABLED_IND' and sort_order = 5 and class_name = 'CARGO_HARBOUR_DUES';

COMMIT;
