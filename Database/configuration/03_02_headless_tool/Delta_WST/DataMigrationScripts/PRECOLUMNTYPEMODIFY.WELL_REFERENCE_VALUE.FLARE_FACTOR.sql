-- Loading ./ECPD26769_WELL_REFERENCE...

ALTER TABLE WELL_REFERENCE_VALUE ADD FLARE_FACTOR_1 NUMBER
--~^UTDELIM^~--

DECLARE 
HASENTRY NUMBER;
BEGIN

	SELECT COUNT(*) INTO HASENTRY FROM USER_TRIGGERS 
		WHERE TRIGGER_NAME = 'IU_WELL_REFERENCE_VALUE'; 
		IF HASENTRY > 0 THEN 
		EXECUTE IMMEDIATE 'ALTER TRIGGER IU_WELL_REFERENCE_VALUE DISABLE';
		END IF;
	
	UPDATE WELL_REFERENCE_VALUE SET FLARE_FACTOR_1 = FLARE_FACTOR;
	
	SELECT COUNT(*) INTO HASENTRY FROM USER_TRIGGERS 
		WHERE TRIGGER_NAME = 'IU_WELL_REFERENCE_VALUE'; 
		IF HASENTRY > 0 THEN 
		EXECUTE IMMEDIATE 'ALTER TRIGGER IU_WELL_REFERENCE_VALUE ENABLE';
		END IF;
EXCEPTION
   WHEN OTHERS 
     THEN

       IF HASENTRY > 0 THEN 
           EXECUTE IMMEDIATE 'ALTER TRIGGER IU_WELL_REFERENCE_VALUE ENABLE';
       END IF;
        
        raise_application_error(-20000,
                            'ERROR: Some Other fatal error occured :- '||SQLERRM);


END;
--~^UTDELIM^~--	


ALTER TABLE WELL_REFERENCE_VALUE DROP COLUMN FLARE_FACTOR
--~^UTDELIM^~--

ALTER TABLE WELL_REFERENCE_VALUE RENAME COLUMN FLARE_FACTOR_1 TO FLARE_FACTOR
--~^UTDELIM^~--
