-- ECPD20850_UPGRADE_SCRIPT...
DECLARE 
HASENTRY NUMBER;
BEGIN
	SELECT COUNT(*) INTO HASENTRY FROM USER_TRIGGERS 
		WHERE TRIGGER_NAME = 'IU_WELL_VERSION'; 
		IF HASENTRY > 0 THEN 
		EXECUTE IMMEDIATE 'ALTER TRIGGER IU_WELL_VERSION DISABLE';
		END IF;
		
	--UPDATE WELL_VERSION SET DETAILED_PROD_METHOD = EC_WELL.DETAILED_PROD_METHOD(OBJECT_ID) WHERE OBJECT_ID IS NOT NULL;
	UPDATE WELL_VERSION wv SET wv.DETAILED_PROD_METHOD = (SELECT DETAILED_PROD_METHOD FROM WELL w WHERE w.OBJECT_ID=wv.OBJECT_ID);
	
	SELECT COUNT(*) INTO HASENTRY FROM USER_TRIGGERS 
		WHERE TRIGGER_NAME = 'IU_WELL_VERSION'; 
		IF HASENTRY > 0 THEN 
		EXECUTE IMMEDIATE 'ALTER TRIGGER IU_WELL_VERSION ENABLE';
		END IF;
		
EXCEPTION
   WHEN OTHERS 
     THEN

       IF HASENTRY > 0 THEN 
           EXECUTE IMMEDIATE 'ALTER TRIGGER IU_WELL_VERSION ENABLE';
       END IF;
        
        raise_application_error(-20000,
                            'ERROR: Some Other fatal error occured :- '||SQLERRM);

 END;
 
--~^UTDELIM^~--