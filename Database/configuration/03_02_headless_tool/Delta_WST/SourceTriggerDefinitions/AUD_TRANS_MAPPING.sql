CREATE OR REPLACE EDITIONABLE TRIGGER "AUD_TRANS_MAPPING" 
   AFTER UPDATE OF SOURCE_ID OR UPDATE OF TAG_ID OR DELETE ON TRANS_MAPPING
   FOR EACH ROW
BEGIN
   IF UPDATING THEN
      UPDATE TRANS_SOURCE_TIME tst
         SET tst.SOURCE_ID = :new.SOURCE_ID, tst.TAG_ID = :new.TAG_ID
       WHERE tst.SOURCE_ID = :old.SOURCE_ID
         AND tst.TAG_ID = :old.TAG_ID
         AND (tst.SOURCE_ID != :new.SOURCE_ID OR tst.TAG_ID != :new.TAG_ID);
   ELSIF DELETING THEN
      DELETE FROM TRANS_SOURCE_TIME tst
       WHERE tst.SOURCE_ID = :old.SOURCE_ID
         AND tst.TAG_ID = :old.TAG_ID;
   END IF;
END;
