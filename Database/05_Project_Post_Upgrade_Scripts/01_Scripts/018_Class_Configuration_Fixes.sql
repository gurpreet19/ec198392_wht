--Issue Fixes
/*****************************************************************************************************************/
-- Below update query updates 5 records for which DB SQL Syntax has to be changed. 
-- resv_block_formation_id has been moved from PERF_INTERNAL to PERF_INTERVAL_VERSION. 
/*****************************************************************************************************************/
update CLASS_ATTRIBUTE_CNFG
 set DB_SQL_SYNTAX = 'ECDP_OBJECTS.GETOBJCODE(EC_RESV_BLOCK_FORMATION.RESV_FORMATION_ID(oa.resv_block_formation_id))'
where DB_SQL_SYNTAX = 'ECDP_OBJECTS.GETOBJCODE(EC_RESV_BLOCK_FORMATION.RESV_FORMATION_ID(o.resv_block_formation_id))';

update CLASS_ATTRIBUTE_CNFG
 set DB_SQL_SYNTAX = 'ECDP_OBJECTS.GETOBJNAME(EC_RESV_BLOCK_FORMATION.RESV_FORMATION_ID(oa.resv_block_formation_id),oa.daytime)'
where DB_SQL_SYNTAX = 'ECDP_OBJECTS.GETOBJNAME(EC_RESV_BLOCK_FORMATION.RESV_FORMATION_ID(o.resv_block_formation_id),oa.daytime)';

UPDATE class_attribute_cnfg
  SET DB_SQL_SYNTAX = 'DATE_8'
WHERE class_name IN ( 'CT_MSG_FORECAST_LIFTINGS','CT_MSG_CARGO_LIFTING','CT_MSG_CARGO')
  AND attribute_name = 'NOM_FIRM_DATE_TIME';
  
 UPDATE class_attribute_cnfg
  SET DB_SQL_SYNTAX = 'DATE_9'
WHERE class_name IN ( 'CT_MSG_FORECAST_LIFTINGS','CT_MSG_CARGO_LIFTING','CT_G_STOR_LIFT_ACTUAL')
  AND attribute_name = 'BL_DATE_TIME';
  
UPDATE class_attribute_cnfg
  SET DB_SQL_SYNTAX = 'decode(ec_forecast_version.TEXT_5(STOR_FCST_LIFT_NOM.FORECAST_ID, STOR_FCST_LIFT_NOM.NOM_FIRM_DATE , ''<=''),''V'',STOR_FCST_LIFT_NOM.DATE_5,''A'',STOR_FCST_LIFT_NOM.DATE_5,nvl(STOR_FCST_LIFT_NOM.DATE_3,DATE_8 - UE_CT_LEADTIME.calc_ETA_LT(STOR_FCST_LIFT_NOM.OBJECT_ID,STOR_FCST_LIFT_NOM.PARCEL_NO,STOR_FCST_LIFT_NOM.FORECAST_ID)))'
WHERE class_name IN ( 'CT_MSG_FORECAST_LIFTINGS')
  AND attribute_name = 'EST_ARRIVAL_TIME';

  
update CLASS_CNFG
set DB_WHERE_CONDITION = null
where CLASS_NAME = 'CT_MSG_CARGO_TIMESHEET';

update CLASS_ATTRIBUTE_CNFG
set DB_SQL_SYNTAX = 'ec_lifting_activity_code.activity_name(LIFTING_ACTIVITY.ACTIVITY_CODE,''LOAD'')'
where  CLASS_NAME = 'CT_MSG_CARGO_TIMESHEET' and attribute_name = 'ACTIVITY_NAME';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'EC_CARRIER_VERSION.TEXT_14(STOR_FCST_LIFT_NOM.CARRIER_ID,STOR_FCST_LIFT_NOM.DATE_8,''<='' )'
WHERE CLASS_NAME = 'FCST_STOR_LIFT_NOM' AND ATTRIBUTE_NAME = 'CONTAINMENT_TYPE';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'EC_CARRIER_VERSION.VALUE_19(STOR_FCST_LIFT_NOM.CARRIER_ID,STOR_FCST_LIFT_NOM.DATE_8,''<='') '
WHERE CLASS_NAME = 'FCST_STOR_LIFT_NOM' AND ATTRIBUTE_NAME = 'EST_ROUND_TRIP_TIME';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'decode(ec_forecast_version.TEXT_5(STOR_FCST_LIFT_NOM.FORECAST_ID, STOR_FCST_LIFT_NOM.NOM_FIRM_DATE , ''<=''),''V'',STOR_FCST_LIFT_NOM.DATE_5,''A'',STOR_FCST_LIFT_NOM.DATE_5,nvl( STOR_FCST_LIFT_NOM.DATE_3,DATE_8 - UE_CT_LEADTIME.calc_ETA_LT(STOR_FCST_LIFT_NOM.OBJECT_ID,STOR_FCST_LIFT_NOM.PARCEL_NO,STOR_FCST_LIFT_NOM.FORECAST_ID)))'
WHERE CLASS_NAME = 'FCST_STOR_LIFT_NOM' AND ATTRIBUTE_NAME = 'ETA';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'TO_CHAR(TRUNC(DATE_8 - UE_CT_LEADTIME.calc_ETA_LT(STOR_FCST_LIFT_NOM.OBJECT_ID,STOR_FCST_LIFT_NOM.PARCEL_NO,STOR_FCST_LIFT_NOM.FORECAST_ID),''MI''), ''YYYY-MM-DD"T"HH24:MI:SS'') || ''S'''
WHERE CLASS_NAME = 'FCST_STOR_LIFT_NOM' AND ATTRIBUTE_NAME = 'ETA_CALC';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'DECODE ( ECDP_OBJECTS.GETOBJCODE (STOR_FCST_LIFT_NOM.OBJECT_ID),''STW_COND'', (trunc(STOR_FCST_LIFT_NOM.DATE_8) + (EC_PROSTY_CODES.ALT_CODE(STOR_FCST_LIFT_NOM.NOM_FIRM_DATE_RANGE,''CARGO_RANGE_MIDDLE'')) + 1-(1/(24*60))))'
WHERE CLASS_NAME = 'FCST_STOR_LIFT_NOM' AND ATTRIBUTE_NAME = 'LDR_FINISH';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'DECODE (ECDP_OBJECTS.GETOBJCODE (STOR_FCST_LIFT_NOM.OBJECT_ID),''STW_COND'', trunc(STOR_FCST_LIFT_NOM.DATE_8)+(1/(24*60)))'
WHERE CLASS_NAME = 'FCST_STOR_LIFT_NOM' AND ATTRIBUTE_NAME = 'LDR_START';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'to_char(DATE_8,''YYYY-MM-DD"T"HH24:MI:SS'')'
WHERE CLASS_NAME = 'FCST_STOR_LIFT_NOM' AND ATTRIBUTE_NAME = 'NOM_DATE_CALC';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'EC_CARRIER_VERSION.TEXT_14(STORAGE_LIFT_NOMINATION.CARRIER_ID,STORAGE_LIFT_NOMINATION.DATE_8,''<='' ) '
WHERE CLASS_NAME = 'STORAGE_LIFT_NOMINATION' AND ATTRIBUTE_NAME = 'CONTAINMENT_TYPE';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'EC_CARRIER_VERSION.VALUE_19(STORAGE_LIFT_NOMINATION.CARRIER_ID,STORAGE_LIFT_NOMINATION.DATE_8,''<='')'
WHERE CLASS_NAME = 'STORAGE_LIFT_NOMINATION' AND ATTRIBUTE_NAME = 'EST_ROUND_TRIP_TIME';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'nvl(STORAGE_LIFT_NOMINATION.DATE_3,DATE_8 - UE_CT_LEADTIME.calc_ETA_LT(STORAGE_LIFT_NOMINATION.OBJECT_ID,STORAGE_LIFT_NOMINATION.PARCEL_NO,NULL,''STOR''))'
WHERE CLASS_NAME = 'STORAGE_LIFT_NOMINATION' AND ATTRIBUTE_NAME = 'ETA';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'TO_CHAR (TRUNC (DATE_8 - UE_CT_LEADTIME.calc_ETA_LT(STORAGE_LIFT_NOMINATION.OBJECT_ID,STORAGE_LIFT_NOMINATION.PARCEL_NO,NULL,''STOR''),''MI''),''YYYY-MM-DD"T"HH24:MI:SS'')|| ''S'''
WHERE CLASS_NAME = 'STORAGE_LIFT_NOMINATION' AND ATTRIBUTE_NAME = 'ETA_CALC';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'ROUND(((DECODE(ECDP_OBJECTS.GETOBJCODE(STORAGE_LIFT_NOMINATION.OBJECT_ID), ''STW_LNG'',EC_LIFTING_ACTIVITY.FROM_DAYTIME(CARGO_NO,''LNG_PILOT_ABOARD'',1,''LOAD''),EC_LIFTING_ACTIVITY.FROM_DAYTIME(CARGO_NO,''COND_PILOT_ABOARD'',1,''LOAD''))) - (DATE_8 - UE_CT_LEADTIME.calc_ETA_LT(STORAGE_LIFT_NOMINATION.OBJECT_ID,STORAGE_LIFT_NOMINATION.PARCEL_NO,NULL,''STOR'')) ) * 24,2)'
WHERE CLASS_NAME = 'STORAGE_LIFT_NOMINATION' AND ATTRIBUTE_NAME = 'ETA_VARIANCE';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'DECODE ( ECDP_OBJECTS.GETOBJCODE (STORAGE_LIFT_NOMINATION.OBJECT_ID),''STW_COND'', (trunc(STORAGE_LIFT_NOMINATION.DATE_8)+ (EC_PROSTY_CODES.ALT_CODE(STORAGE_LIFT_NOMINATION.DATE_8,''CARGO_RANGE_MIDDLE'')) + 1-(1/(24*60))))'
WHERE CLASS_NAME = 'STORAGE_LIFT_NOMINATION' AND ATTRIBUTE_NAME = 'LDR_FINISH';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'DECODE (ECDP_OBJECTS.GETOBJCODE (STORAGE_LIFT_NOMINATION.OBJECT_ID),''STW_COND'', trunc(STORAGE_LIFT_NOMINATION.DATE_8)+(1/(24*60)))'
WHERE CLASS_NAME = 'STORAGE_LIFT_NOMINATION' AND ATTRIBUTE_NAME = 'LDR_START';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'EC_CARRIER_VERSION.VALUE_19(STOR_FCST_LIFT_NOM.CARRIER_ID,STOR_FCST_LIFT_NOM.DATE_8,''<='')'
WHERE CLASS_NAME = 'FCST_STOR_LIFT_NOM_SCHED' AND ATTRIBUTE_NAME = 'EST_ROUND_TRIP_TIME';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'decode(ec_forecast_version.TEXT_5(STOR_FCST_LIFT_NOM.FORECAST_ID, STOR_FCST_LIFT_NOM.NOM_FIRM_DATE , ''<=''),''V'',STOR_FCST_LIFT_NOM.DATE_5,''A'',STOR_FCST_LIFT_NOM.DATE_5,nvl( STOR_FCST_LIFT_NOM.DATE_3,DATE_8 - UE_CT_LEADTIME.calc_ETA_LT(STOR_FCST_LIFT_NOM.OBJECT_ID,STOR_FCST_LIFT_NOM.PARCEL_NO,STOR_FCST_LIFT_NOM.FORECAST_ID)))'
WHERE CLASS_NAME = 'FCST_STOR_LIFT_NOM_SCHED' AND ATTRIBUTE_NAME = 'ETA';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'DECODE ( ECDP_OBJECTS.GETOBJCODE (STOR_FCST_LIFT_NOM.OBJECT_ID),''STW_COND'', (trunc(STOR_FCST_LIFT_NOM.DATE_8)
+ (EC_PROSTY_CODES.ALT_CODE(STOR_FCST_LIFT_NOM.NOM_FIRM_DATE_RANGE,''CARGO_RANGE_MIDDLE'')) + 1-(1/(24*60))))'
WHERE CLASS_NAME = 'FCST_STOR_LIFT_NOM_SCHED' AND ATTRIBUTE_NAME = 'LDR_FINISH';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'DECODE (ECDP_OBJECTS.GETOBJCODE (STOR_FCST_LIFT_NOM.OBJECT_ID),''STW_COND'', trunc(STOR_FCST_LIFT_NOM.DATE_8)+(1/(24*60)))'
WHERE CLASS_NAME = 'FCST_STOR_LIFT_NOM_SCHED' AND ATTRIBUTE_NAME = 'LDR_START';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'ROUND(((DECODE(ECDP_OBJECTS.GETOBJCODE(STORAGE_LIFT_NOMINATION.OBJECT_ID), ''STW_LNG'',EC_LIFTING_ACTIVITY.FROM_DAYTIME(CARGO_NO,''LNG_PILOT_AWAY'',1,''LOAD''),EC_LIFTING_ACTIVITY.FROM_DAYTIME(CARGO_NO,''COND_PILOT_AWAY'',1,''LOAD'')))-UE_CT_LEADTIME.calc_Combine_ETD_LT(STORAGE_LIFT_NOMINATION.OBJECT_ID,STORAGE_LIFT_NOMINATION.PARCEL_NO,NULL,NULL,''STOR'')) * 24,2)'
WHERE CLASS_NAME = 'STORAGE_LIFT_NOMINATION' AND ATTRIBUTE_NAME = 'ETD_VARIANCE';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'DECODE(ECDP_OBJECTS.GETOBJCODE(STORAGE_LIFT_NOMINATION.OBJECT_ID),''STW_LNG'',EC_LIFTING_ACTIVITY.FROM_DAYTIME(CARGO_NO,''LNG_PILOT_AWAY'',1,''LOAD''),EC_LIFTING_ACTIVITY.FROM_DAYTIME(CARGO_NO,''COND_PILOT_AWAY'',1,''LOAD''))'
where CLASS_NAME = 'STORAGE_LIFT_NOMINATION' and ATTRIBUTE_NAME = 'PILOT_AWAY';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'DECODE(ECDP_OBJECTS.GETOBJCODE(STORAGE_LIFT_NOMINATION.OBJECT_ID), ''STW_LNG'',EC_LIFTING_ACTIVITY.FROM_DAYTIME(CARGO_NO,''LNG_PILOT_ABOARD'',1,''LOAD''),EC_LIFTING_ACTIVITY.FROM_DAYTIME(CARGO_NO,''COND_PILOT_ABOARD'',1,''LOAD''))'
WHERE CLASS_NAME = 'STORAGE_LIFT_NOMINATION' AND ATTRIBUTE_NAME = 'PILOT_ONBOARD';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'EC_CARRIER_VERSION.VALUE_19(STORAGE_LIFT_NOMINATION.CARRIER_ID,STORAGE_LIFT_NOMINATION.DATE_8,''<='')'
WHERE CLASS_NAME = 'STORAGE_LIFT_NOM_SCHED' AND ATTRIBUTE_NAME = 'EST_ROUND_TRIP_TIME';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'nvl(STORAGE_LIFT_NOMINATION.DATE_3,DATE_8 - UE_CT_LEADTIME.calc_ETA_LT(STORAGE_LIFT_NOMINATION.OBJECT_ID,STORAGE_LIFT_NOMINATION.PARCEL_NO,NULL,''STOR''))'
WHERE CLASS_NAME = 'STORAGE_LIFT_NOM_SCHED' AND ATTRIBUTE_NAME = 'ETA';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'nvl(STORAGE_LIFT_NOMINATION.DATE_3,DATE_8 - UE_CT_LEADTIME.calc_ETA_LT(STORAGE_LIFT_NOMINATION.OBJECT_ID,STORAGE_LIFT_NOMINATION.PARCEL_NO,NULL,''STOR''))'
WHERE CLASS_NAME = 'STORAGE_LIFT_NOM_SCHED' AND ATTRIBUTE_NAME = 'LDR_FINISH';

update CLASS_ATTRIBUTE_CNFG
   set DB_SQL_SYNTAX = 'DECODE (ECDP_OBJECTS.GETOBJCODE (STORAGE_LIFT_NOMINATION.OBJECT_ID),''STW_COND'', trunc(STORAGE_LIFT_NOMINATION.DATE_8)+(1/(24*60)))'
WHERE CLASS_NAME = 'STORAGE_LIFT_NOM_SCHED' AND ATTRIBUTE_NAME = 'LDR_START';
