-- DV_DEMURRAGE
UPDATE CLASS_ATTRIBUTE_CNFG
SET DB_SQL_SYNTAX = 'EC_LIFTING_ACTIVITY.from_daytime(CARGO_NO, UE_CT_DEMURRAGE.GetDemurrageActivityCode(CARGO_NO, DEMURRAGE_TYPE, ''START''), 1,LIFTING_EVENT)'
WHERE CLASS_NAME = 'DEMURRAGE' AND ATTRIBUTE_NAME = 'COMMENCE_LAYTIME';

UPDATE CLASS_ATTRIBUTE_CNFG
SET DB_SQL_SYNTAX = '(NVL(EC_LIFTING_ACTIVITY.TO_daytime(CARGO_NO, UE_CT_DEMURRAGE.GetDemurrageActivityCode(CARGO_NO, DEMURRAGE_TYPE, ''END''), 1, LIFTING_EVENT), EC_LIFTING_ACTIVITY.from_daytime(CARGO_NO, UE_CT_DEMURRAGE.GetDemurrageActivityCode(CARGO_NO, DEMURRAGE_TYPE, ''END''), 1, LIFTING_EVENT))-EC_LIFTING_ACTIVITY.from_daytime(CARGO_NO, UE_CT_DEMURRAGE.GetDemurrageActivityCode(CARGO_NO, DEMURRAGE_TYPE, ''START''), 1, LIFTING_EVENT)) + UE_CT_DEMURRAGE.GetDemurrageExtension(CARGO_NO, DEMURRAGE_TYPE, ''Y'', 1) + UE_CT_DEMURRAGE.GetDemurrageExtension(CARGO_NO, DEMURRAGE_TYPE, ''Y'', 2) + UE_CT_DEMURRAGE.GetDemurrageExtension(CARGO_NO, DEMURRAGE_TYPE, ''Y'', 3)'
WHERE CLASS_NAME = 'DEMURRAGE' AND ATTRIBUTE_NAME = 'EQ_LAYTIME';

UPDATE CLASS_ATTRIBUTE_CNFG
SET DB_SQL_SYNTAX = '(NVL(EC_LIFTING_ACTIVITY.TO_daytime(CARGO_NO, UE_CT_DEMURRAGE.GetDemurrageActivityCode(CARGO_NO, DEMURRAGE_TYPE, ''END''), 1, LIFTING_EVENT), EC_LIFTING_ACTIVITY.from_daytime(CARGO_NO, UE_CT_DEMURRAGE.GetDemurrageActivityCode(CARGO_NO, DEMURRAGE_TYPE, ''END''), 1, LIFTING_EVENT))-EC_LIFTING_ACTIVITY.from_daytime(CARGO_NO, UE_CT_DEMURRAGE.GetDemurrageActivityCode(CARGO_NO, DEMURRAGE_TYPE, ''START''), 1, LIFTING_EVENT)) + UE_CT_DEMURRAGE.GetDemurrageExtension(CARGO_NO, DEMURRAGE_TYPE, ''Y'', 1) + UE_CT_DEMURRAGE.GetDemurrageExtension(CARGO_NO, DEMURRAGE_TYPE, ''Y'', 2) + UE_CT_DEMURRAGE.GetDemurrageExtension(CARGO_NO, DEMURRAGE_TYPE, ''Y'', 3)'
WHERE CLASS_NAME = 'DEMURRAGE' AND ATTRIBUTE_NAME = 'MINUS_LAYTIME';

UPDATE CLASS_ATTRIBUTE_CNFG
SET DB_SQL_SYNTAX = 'NVL(EC_LIFTING_ACTIVITY.TO_daytime(CARGO_NO, UE_CT_DEMURRAGE.GetDemurrageActivityCode(CARGO_NO, DEMURRAGE_TYPE, ''END''), 1, LIFTING_EVENT), EC_LIFTING_ACTIVITY.from_daytime(CARGO_NO, UE_CT_DEMURRAGE.GetDemurrageActivityCode(CARGO_NO, DEMURRAGE_TYPE, ''END''), 1, LIFTING_EVENT))'
WHERE CLASS_NAME = 'DEMURRAGE' AND ATTRIBUTE_NAME = 'COMPLETED_LAYTIME';

UPDATE CLASS_ATTRIBUTE_CNFG
SET DB_SQL_SYNTAX = 'NVL(EC_LIFTING_ACTIVITY.TO_daytime(CARGO_NO, UE_CT_DEMURRAGE.GetDemurrageActivityCode(CARGO_NO, DEMURRAGE_TYPE, ''END''), 1, LIFTING_EVENT), EC_LIFTING_ACTIVITY.from_daytime(CARGO_NO, UE_CT_DEMURRAGE.GetDemurrageActivityCode(CARGO_NO, DEMURRAGE_TYPE, ''END''), 1, LIFTING_EVENT))'
WHERE CLASS_NAME = 'DEMURRAGE' AND ATTRIBUTE_NAME = 'INTERMEDIATE_LAYTIME';

UPDATE CLASS_ATTRIBUTE_CNFG
SET DB_SQL_SYNTAX = 'NVL(EC_LIFTING_ACTIVITY.TO_daytime(CARGO_NO, UE_CT_DEMURRAGE.GetDemurrageActivityCode(CARGO_NO, DEMURRAGE_TYPE, ''END''), 1, LIFTING_EVENT), EC_LIFTING_ACTIVITY.from_daytime(CARGO_NO, UE_CT_DEMURRAGE.GetDemurrageActivityCode(CARGO_NO, DEMURRAGE_TYPE, ''END''), 1, LIFTING_EVENT))'
WHERE CLASS_NAME = 'DEMURRAGE' AND ATTRIBUTE_NAME = 'INTERMEDIATE_LAYTIME';

update viewlayer_dirty_log set dirty_ind='Y' where object_name like 'DEMURRAGE' ;
Commit;
execute ecdp_viewlayer.BuildViewLayer('DEMURRAGE');