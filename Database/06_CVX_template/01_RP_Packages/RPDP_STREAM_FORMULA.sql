
 -- START PKG_GEN_PKGS.sf_get_functions at:11/16/2018 09.20.03 AM


CREATE or REPLACE PACKAGE RPDP_STREAM_FORMULA
IS

   FUNCTION EVALUATEFORMULA(
      P_FORMULA_ID IN VARCHAR2,
      P_FORMULA IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE,
      P_STREAM_ID IN VARCHAR2 DEFAULT NULL)
      RETURN NUMBER;
   FUNCTION GETGRSSTDVOL(
      P_OBJECT_ID IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE)
      RETURN NUMBER;
   FUNCTION GETENERGY(
      P_OBJECT_ID IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE)
      RETURN NUMBER;
   FUNCTION GETGRSSTDMASS(
      P_OBJECT_ID IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE)
      RETURN NUMBER;
   FUNCTION ZERO(
      P_A IN NUMBER,
      P_B IN NUMBER)
      RETURN NUMBER;
   FUNCTION CHECKCIRCULARREFERENCE(
      P_DAYTIME IN DATE,
      P_MEMBER_OBJECT_ID IN VARCHAR2,
      P_MEMBER_METHOD IN VARCHAR2,
      P_ORIG_OBJECT_ID IN VARCHAR2,
      P_ORIG_METHOD IN VARCHAR2)
      RETURN NUMBER;
   FUNCTION GETNETSTDVOL(
      P_OBJECT_ID IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE)
      RETURN NUMBER;
      TYPE REC_GETNEXTFORMULA IS RECORD (
         FORMULA_NO NUMBER ,
         OBJECT_ID VARCHAR2 (32) ,
         FORMULA_METHOD VARCHAR2 (32) ,
         DAYTIME  DATE ,
         FORMULA VARCHAR2 (2000) ,
         COMMENTS VARCHAR2 (2000) ,
         RECORD_STATUS VARCHAR2 (1) ,
         CREATED_BY VARCHAR2 (30) ,
         CREATED_DATE  DATE ,
         LAST_UPDATED_BY VARCHAR2 (30) ,
         LAST_UPDATED_DATE  DATE ,
         REV_NO NUMBER ,
         REV_TEXT VARCHAR2 (2000) ,
         APPROVAL_BY VARCHAR2 (30) ,
         APPROVAL_DATE  DATE ,
         APPROVAL_STATE VARCHAR2 (1) ,
         REC_ID VARCHAR2 (32)  );
   FUNCTION GETNEXTFORMULA(
      P_OBJECT_ID IN VARCHAR2,
      P_FORMULA_METHOD IN VARCHAR2,
      P_DAYTIME IN DATE)
      RETURN REC_GETNEXTFORMULA;
   FUNCTION GETPOWERCONSUMPTION(
      P_OBJECT_ID IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE)
      RETURN NUMBER;
   FUNCTION GETNETSTDMASS(
      P_OBJECT_ID IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE)
      RETURN NUMBER;
      TYPE REC_GETPREVIOUSFORMULA IS RECORD (
         FORMULA_NO NUMBER ,
         OBJECT_ID VARCHAR2 (32) ,
         FORMULA_METHOD VARCHAR2 (32) ,
         DAYTIME  DATE ,
         FORMULA VARCHAR2 (2000) ,
         COMMENTS VARCHAR2 (2000) ,
         RECORD_STATUS VARCHAR2 (1) ,
         CREATED_BY VARCHAR2 (30) ,
         CREATED_DATE  DATE ,
         LAST_UPDATED_BY VARCHAR2 (30) ,
         LAST_UPDATED_DATE  DATE ,
         REV_NO NUMBER ,
         REV_TEXT VARCHAR2 (2000) ,
         APPROVAL_BY VARCHAR2 (30) ,
         APPROVAL_DATE  DATE ,
         APPROVAL_STATE VARCHAR2 (1) ,
         REC_ID VARCHAR2 (32)  );
   FUNCTION GETPREVIOUSFORMULA(
      P_OBJECT_ID IN VARCHAR2,
      P_FORMULA_METHOD IN VARCHAR2,
      P_DAYTIME IN DATE)
      RETURN REC_GETPREVIOUSFORMULA;
      TYPE REC_GETLASTAVAILABLEFORMULA IS RECORD (
         FORMULA_NO NUMBER ,
         OBJECT_ID VARCHAR2 (32) ,
         FORMULA_METHOD VARCHAR2 (32) ,
         DAYTIME  DATE ,
         FORMULA VARCHAR2 (2000) ,
         COMMENTS VARCHAR2 (2000) ,
         RECORD_STATUS VARCHAR2 (1) ,
         CREATED_BY VARCHAR2 (30) ,
         CREATED_DATE  DATE ,
         LAST_UPDATED_BY VARCHAR2 (30) ,
         LAST_UPDATED_DATE  DATE ,
         REV_NO NUMBER ,
         REV_TEXT VARCHAR2 (2000) ,
         APPROVAL_BY VARCHAR2 (30) ,
         APPROVAL_DATE  DATE ,
         APPROVAL_STATE VARCHAR2 (1) ,
         REC_ID VARCHAR2 (32)  );
   FUNCTION GETLASTAVAILABLEFORMULA(
      P_OBJECT_ID IN VARCHAR2,
      P_FORMULA_METHOD IN VARCHAR2,
      P_DAYTIME IN DATE)
      RETURN REC_GETLASTAVAILABLEFORMULA;
   FUNCTION TRANSLATESTRMMETHODS(
      P_METHOD IN VARCHAR2)
      RETURN VARCHAR2;
   FUNCTION GETGCV(
      P_OBJECT_ID IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE)
      RETURN NUMBER;
   FUNCTION GETVALUEFROMFORMULA(
      P_OBJECT_ID IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE,
      P_METHOD IN VARCHAR2)
      RETURN NUMBER;
   FUNCTION REPLACEITEM(
      P_FORMULA_NO IN VARCHAR2,
      P_VARIABLE_NAME IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE,
      P_STREAM_ID IN VARCHAR2 DEFAULT NULL)
      RETURN VARCHAR2;

END RPDP_STREAM_FORMULA;

/



CREATE or REPLACE PACKAGE BODY RPDP_STREAM_FORMULA
IS

   FUNCTION EVALUATEFORMULA(
      P_FORMULA_ID IN VARCHAR2,
      P_FORMULA IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE,
      P_STREAM_ID IN VARCHAR2 DEFAULT NULL)
      RETURN NUMBER
   IS
      ret_value   NUMBER ;
   BEGIN
      ret_value := ECDP_STREAM_FORMULA.EVALUATEFORMULA      (
         P_FORMULA_ID,
         P_FORMULA,
         P_FROMDAY,
         P_TODAY,
         P_STREAM_ID );
         RETURN ret_value;
   END EVALUATEFORMULA;
   FUNCTION GETGRSSTDVOL(
      P_OBJECT_ID IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE)
      RETURN NUMBER
   IS
      ret_value   NUMBER ;
   BEGIN
      ret_value := ECDP_STREAM_FORMULA.GETGRSSTDVOL      (
         P_OBJECT_ID,
         P_FROMDAY,
         P_TODAY );
         RETURN ret_value;
   END GETGRSSTDVOL;
   FUNCTION GETENERGY(
      P_OBJECT_ID IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE)
      RETURN NUMBER
   IS
      ret_value   NUMBER ;
   BEGIN
      ret_value := ECDP_STREAM_FORMULA.GETENERGY      (
         P_OBJECT_ID,
         P_FROMDAY,
         P_TODAY );
         RETURN ret_value;
   END GETENERGY;
   FUNCTION GETGRSSTDMASS(
      P_OBJECT_ID IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE)
      RETURN NUMBER
   IS
      ret_value   NUMBER ;
   BEGIN
      ret_value := ECDP_STREAM_FORMULA.GETGRSSTDMASS      (
         P_OBJECT_ID,
         P_FROMDAY,
         P_TODAY );
         RETURN ret_value;
   END GETGRSSTDMASS;
   FUNCTION ZERO(
      P_A IN NUMBER,
      P_B IN NUMBER)
      RETURN NUMBER
   IS
      ret_value   NUMBER ;
   BEGIN
      ret_value := ECDP_STREAM_FORMULA.ZERO      (
         P_A,
         P_B );
         RETURN ret_value;
   END ZERO;
   FUNCTION CHECKCIRCULARREFERENCE(
      P_DAYTIME IN DATE,
      P_MEMBER_OBJECT_ID IN VARCHAR2,
      P_MEMBER_METHOD IN VARCHAR2,
      P_ORIG_OBJECT_ID IN VARCHAR2,
      P_ORIG_METHOD IN VARCHAR2)
      RETURN NUMBER
   IS
      ret_value   NUMBER ;
   BEGIN
      ret_value := ECDP_STREAM_FORMULA.CHECKCIRCULARREFERENCE      (
         P_DAYTIME,
         P_MEMBER_OBJECT_ID,
         P_MEMBER_METHOD,
         P_ORIG_OBJECT_ID,
         P_ORIG_METHOD );
         RETURN ret_value;
   END CHECKCIRCULARREFERENCE;
   FUNCTION GETNETSTDVOL(
      P_OBJECT_ID IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE)
      RETURN NUMBER
   IS
      ret_value   NUMBER ;
   BEGIN
      ret_value := ECDP_STREAM_FORMULA.GETNETSTDVOL      (
         P_OBJECT_ID,
         P_FROMDAY,
         P_TODAY );
         RETURN ret_value;
   END GETNETSTDVOL;
   FUNCTION GETNEXTFORMULA(
      P_OBJECT_ID IN VARCHAR2,
      P_FORMULA_METHOD IN VARCHAR2,
      P_DAYTIME IN DATE)
      RETURN REC_GETNEXTFORMULA
   IS
      ret_value    REC_GETNEXTFORMULA ;
   BEGIN
      ret_value := ECDP_STREAM_FORMULA.GETNEXTFORMULA      (
         P_OBJECT_ID,
         P_FORMULA_METHOD,
         P_DAYTIME );
         RETURN ret_value;
   END GETNEXTFORMULA;
   FUNCTION GETPOWERCONSUMPTION(
      P_OBJECT_ID IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE)
      RETURN NUMBER
   IS
      ret_value   NUMBER ;
   BEGIN
      ret_value := ECDP_STREAM_FORMULA.GETPOWERCONSUMPTION      (
         P_OBJECT_ID,
         P_FROMDAY,
         P_TODAY );
         RETURN ret_value;
   END GETPOWERCONSUMPTION;
   FUNCTION GETNETSTDMASS(
      P_OBJECT_ID IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE)
      RETURN NUMBER
   IS
      ret_value   NUMBER ;
   BEGIN
      ret_value := ECDP_STREAM_FORMULA.GETNETSTDMASS      (
         P_OBJECT_ID,
         P_FROMDAY,
         P_TODAY );
         RETURN ret_value;
   END GETNETSTDMASS;
   FUNCTION GETPREVIOUSFORMULA(
      P_OBJECT_ID IN VARCHAR2,
      P_FORMULA_METHOD IN VARCHAR2,
      P_DAYTIME IN DATE)
      RETURN REC_GETPREVIOUSFORMULA
   IS
      ret_value    REC_GETPREVIOUSFORMULA ;
   BEGIN
      ret_value := ECDP_STREAM_FORMULA.GETPREVIOUSFORMULA      (
         P_OBJECT_ID,
         P_FORMULA_METHOD,
         P_DAYTIME );
         RETURN ret_value;
   END GETPREVIOUSFORMULA;
   FUNCTION GETLASTAVAILABLEFORMULA(
      P_OBJECT_ID IN VARCHAR2,
      P_FORMULA_METHOD IN VARCHAR2,
      P_DAYTIME IN DATE)
      RETURN REC_GETLASTAVAILABLEFORMULA
   IS
      ret_value    REC_GETLASTAVAILABLEFORMULA ;
   BEGIN
      ret_value := ECDP_STREAM_FORMULA.GETLASTAVAILABLEFORMULA      (
         P_OBJECT_ID,
         P_FORMULA_METHOD,
         P_DAYTIME );
         RETURN ret_value;
   END GETLASTAVAILABLEFORMULA;
   FUNCTION TRANSLATESTRMMETHODS(
      P_METHOD IN VARCHAR2)
      RETURN VARCHAR2
   IS
      ret_value   VARCHAR2(4000) ;
   BEGIN
      ret_value := ECDP_STREAM_FORMULA.TRANSLATESTRMMETHODS      (
         P_METHOD );
         RETURN ret_value;
   END TRANSLATESTRMMETHODS;
   FUNCTION GETGCV(
      P_OBJECT_ID IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE)
      RETURN NUMBER
   IS
      ret_value   NUMBER ;
   BEGIN
      ret_value := ECDP_STREAM_FORMULA.GETGCV      (
         P_OBJECT_ID,
         P_FROMDAY,
         P_TODAY );
         RETURN ret_value;
   END GETGCV;
   FUNCTION GETVALUEFROMFORMULA(
      P_OBJECT_ID IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE,
      P_METHOD IN VARCHAR2)
      RETURN NUMBER
   IS
      ret_value   NUMBER ;
   BEGIN
      ret_value := ECDP_STREAM_FORMULA.GETVALUEFROMFORMULA      (
         P_OBJECT_ID,
         P_FROMDAY,
         P_TODAY,
         P_METHOD );
         RETURN ret_value;
   END GETVALUEFROMFORMULA;
   FUNCTION REPLACEITEM(
      P_FORMULA_NO IN VARCHAR2,
      P_VARIABLE_NAME IN VARCHAR2,
      P_FROMDAY IN DATE,
      P_TODAY IN DATE,
      P_STREAM_ID IN VARCHAR2 DEFAULT NULL)
      RETURN VARCHAR2
   IS
      ret_value   VARCHAR2(4000) ;
   BEGIN
      ret_value := ECDP_STREAM_FORMULA.REPLACEITEM      (
         P_FORMULA_NO,
         P_VARIABLE_NAME,
         P_FROMDAY,
         P_TODAY,
         P_STREAM_ID );
         RETURN ret_value;
   END REPLACEITEM;

END RPDP_STREAM_FORMULA;

/
--GRANT EXECUTE ON ECKERNEL_WST.RPDP_STREAM_FORMULA TO REPORT_ROLE_XXX;



 -- FINISH PKG_GEN_PKGS.sf_get_functions at:11/16/2018 09.20.06 AM


