DECLARE 
HASENTRY NUMBER;
BEGIN
	SELECT COUNT(*) INTO HASENTRY FROM USER_TRIGGERS 
		WHERE TRIGGER_NAME = 'IU_CNTR_PERIOD_CAPACITY'; 
		IF HASENTRY > 0 THEN 
		EXECUTE IMMEDIATE 'ALTER TRIGGER IU_CNTR_PERIOD_CAPACITY DISABLE';
		END IF;
	
	UPDATE CNTR_PERIOD_CAPACITY SET PERIOD_CAPACITY_NO = EcDp_System_Key.assignNextNumber('CNTR_PERIOD_CAPACITY') ;
	
	SELECT COUNT(*) INTO HASENTRY FROM USER_TRIGGERS 
		WHERE TRIGGER_NAME = 'IU_CNTR_PERIOD_CAPACITY'; 
		IF HASENTRY > 0 THEN 
		EXECUTE IMMEDIATE 'ALTER TRIGGER IU_CNTR_PERIOD_CAPACITY ENABLE';
		END IF;
	EXCEPTION
   WHEN OTHERS 
     THEN
       IF HASENTRY > 0 THEN 
           EXECUTE IMMEDIATE 'ALTER TRIGGER IU_CNTR_PERIOD_CAPACITY ENABLE';
       END IF;
        
        raise_application_error(-20000,
                            'ERROR: Some Other fatal error occured :- '||SQLERRM);
END;
--~^UTDELIM^~--